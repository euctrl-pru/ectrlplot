---
title: "Why ectrlplot?"
author: "Stavrou Androniki"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Why ectrlplot?}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r echo = FALSE, message = FALSE}
library(ectrlplot)
```

## Introduction

### What is the `ectrlplot` package?

This is an R package, developed by the PRU team to make the process of creating publication-ready graphics in our in-house style, using Râ€™s `ggplot2` library, a more reproducible process.  

The package is constisted of the following functions:

- `theme_pru()` 
to add the PRU style in the ggplot2 graphics

- `add_logo()` 
to add the EUROCONTROL logo and the source

- `pru_pal()`

- `scale_color_pru()`, `scale_colour_pru()` & `scale_fill_pru()` 
to use the colour palette of the PRU team

```{r fig.align='left', echo=FALSE, out.width='65%', include=identical(knitr:::pandoc_to(), 'html')}
knitr::include_graphics('pru-pal.png', dpi = NA)
```

### Why to use it?

This package can be used to give to the graphics made by the PRU team a consistent customized look.

## Examples

The following examples will help you understand how to use `ectrlplot` package and its components step by step.

### Example 1

Let's start with a basic scatterplot example 

```{r, fig.show='hold', warning=FALSE}
library(ggplot2)

p1 <- ggplot(mtcars, aes(wt, mpg)) +
  geom_point() +
  labs(title = 'Scatterplot example in ggplot2',
     subtitle = 'A plot that is only useful for demonstration purposes')
p1
```

#### Adding theme_pru()

```{r, fig.show='hold', warning=FALSE}
p1 + theme_pru()
```

#### Discrete color & fill scales based on the PRU palette

Use the PRU color palette by adding `scale_color_pru()`, `scale_colour_pru()` or `scale_fill_pru()`

```{r, fig.show='hold', warning=FALSE}
library(scales)

p2 <- ggplot(mpg, aes(displ, hwy, colour = class)) +
 geom_point() +
 theme_pru() +
 scale_color_pru() +
labs(title = 'Scatterplot example in ggplot2',
     subtitle = 'A plot that is only useful for demonstration purposes')
p2
```

#### Modify components of the theme_pru() 

If you want to modify a single plot's theme use `theme()`

```{r, fig.show='hold', warning=FALSE}
p3 <- p2 + theme(axis.line.y = ggplot2::element_line(colour = "#D5D5D5",
                                          size = 1.2,
                                          linetype = "solid",
                                          lineend = "round"),
           panel.grid.major.y = ggplot2::element_blank())
p3
```

#### Add logo 

Finish the plot by adding the logo and the source

```{r, fig.show='hold', warning=FALSE}
add_logo(plot_name = p3,
         source = "Source: My source",
         save_filepath = "thisismyplot.png",
         width_pixels = 640,
         height_pixels = 450)
```

### Example 2

Now, let's see how to use the `ectrlplot` package in ggplot2 bar chart

```{r, fig.show='hold', warning=FALSE}
b1 <- ggplot(mpg[1:137,], aes(class)) +
  geom_bar()  +
  labs(title = 'Bar chart example in ggplot2',
     subtitle = 'A plot that is only useful for demonstration purposes')
b1
```


```{r, fig.show='hold', warning=FALSE}
b1 + theme_pru()
```

```{r, fig.show='hold', warning=FALSE}
b2 <- ggplot(mpg[1:137,], aes(class)) +
  geom_bar(aes(fill = manufacturer)) +
  theme_pru() +
  scale_y_continuous(expand = c(0,0))  +
  labs(title = 'Bar chart example in ggplot2',
     subtitle = 'A plot that is only useful for demonstration purposes')
b2
```

```{r, fig.show='hold', warning=FALSE}
b3 <- b2 + scale_fill_pru()
b3
```

```{r, fig.show='hold', warning=FALSE}
add_logo(plot_name = b3,
         source = "Source: My source",
         save_filepath = "thisismyplot.png",
         width_pixels = 640,
         height_pixels = 450)
```
